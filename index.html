<!DOCTYPE html>
<html>
<head>
  <title>Goalie Tracker</title>

  <style>
    /* Table Styles */
    table {
      border-collapse: collapse;
      width: 100%;
    }
  
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }
  
    th {
      background-color: #f2f2f2;
      font-weight: bold;
    }
  
    /* Form Styles */
    #logForm {
      margin-bottom: 20px;
    }
  
    #logForm input[type="number"] {
      width: 100px;
      padding: 5px;
      margin-right: 10px;
    }
  
    #logForm input[type="text"] {
      width: 200px;
      padding: 5px;
      margin-right: 10px;
    }
  
    #logForm select {
      width: 100px;
      padding: 5px;
      margin-right: 10px;
    }
  
    #logForm button {
      padding: 5px 10px;
      color: #fff;
      border: none;
      cursor: pointer;
    }
  
    /* Blue Button */
    .blue-button {
      background-color: #007BFF;
    }
  
    /* Red Button (Opponent Scored) */
    .red-button {
      background-color: #FF0000;
    }
  
    /* Green Button (Team Scored) */
    .green-button {
      background-color: #00CC00; /* Changed to #00CC00 */
    }
  </style>
  

</head>

<body>

  <h1>Goalie Tracker</h1>

  <table id="stats">
    <tr>
      <th>Team Score</th>
      <th>Opponent Score</th>
    </tr>
    <tr>
      <td id="teamScore">0</td>
      <td id="opponentScore">0</td>
    </tr>
  </table>

  <h2>Log New Entry</h2>

  <form id="logForm">
    <!-- Form Fields -->
    <select id="goalieSelection">
      <option value="Goalie1">Goalie 1</option>
      <option value="Goalie2">Goalie 2</option>
      <option value="Goalie3">Goalie 3</option>
      <option value="Goalie4">Goalie 4</option>
      <option value="Goalie5">Goalie 5</option>
    </select>
    <input type="number" id="savesInput" placeholder="Saves">
    <input type="number" id="goalsAgainstInput" placeholder="Goals Against">
    <input type="number" id="cleanSheetsInput" placeholder="Clean Sheets">
    <select id="goalieKickInput">
      <option value="">Goalie Kick</option>
      <option value="Punt">Punt</option>
      <option value="Goal Kick">Goal Kick</option>
    </select>
    <select id="qualifierInput">
      <option value="">Qualifier</option>
      <option value="Passed">Passed</option>
      <option value="Missed">Missed</option>
    </select>
    <input type="text" id="notesInput" placeholder="Notes">
    <button type="submit" class="blue-button">Log Entry</button>
  </form>
  <hr>
  <form id="logForm">
    <!-- Create three columns -->
    <table>
      <tr>
        <td>
          <div class="column">
            <button type="button" onclick="logEvent('Game Start')" class="blue-button">Game Start</button>
            <br><br><button type="button" onclick="logEvent('Break Start')" class="blue-button">Break Start</button>
            <br><br><br><button type="button" onclick="logEvent('Break End')" class="blue-button">Break End</button>
            <br><br><button type="button" onclick="logEvent('Game End')" class="blue-button">Game End</button>
          </div>        
        </td>
        <td>
          <!-- Goalie actions -->
          <div>
          </div>        
        </td>
        <td>
          <div>
            <button type="button" class="red-button" onclick="logEvent('Opponent Scored')">Opponent Scored</button>
            <br><br><button type="button" class="green-button" onclick="logEvent('Team Scored')">Team Scored</button>  
          </div>        
        </td>
      </tr>
    </table>   
  </form>

  <hr> <!-- Added <hr> to divide the parts -->

  <h2>Log Entries</h2>

  <table id="log">
    <tr>
      <th>Time</th>
      <th>Event</th>
      <th>Goalie</th>
      <th>Saves</th>
      <th>Goals Against</th>
      <th>Clean Sheets</th>
      <th>Goalie Kick</th>
      <th>Qualifier</th>
      <th>Notes</th>
    </tr>
  </table>

  <button onclick="exportJSON()">Export JSON</button>
  <button onclick="importJSON()">Import JSON</button>
  <button onclick="clearLog()">Clear Log</button>

  <script>
    let saves = 0;
    let goalsAgainst = 0;
    let cleanSheets = 0;
    let teamScore = 0;
    let opponentScore = 0;

    const form = document.getElementById('logForm');
    const logTable = document.getElementById('log');
    const statsTable = document.getElementById('stats');
    const teamScoreDisplay = document.getElementById('teamScore');
    const opponentScoreDisplay = document.getElementById('opponentScore');

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const goalieSelection = document.getElementById('goalieSelection').value;
      const savesInput = document.getElementById('savesInput').valueAsNumber;
      const goalsAgainstInput = document.getElementById('goalsAgainstInput').valueAsNumber;
      const cleanSheetsInput = document.getElementById('cleanSheetsInput').valueAsNumber;
      const goalieKickInput = document.getElementById('goalieKickInput').value;
      const qualifierInput = document.getElementById('qualifierInput').value;
      const notesInput = document.getElementById('notesInput').value;
      logEntry({ time: new Date().toLocaleTimeString(), goalie: goalieSelection, saves: savesInput, goalsAgainst: goalsAgainstInput, cleanSheets: cleanSheetsInput, goalieKick: goalieKickInput, qualifier: qualifierInput, notes: notesInput });
      updateStats();
      // Reset form fields
      form.reset();
    });

    function logEvent(eventType) {
      const notesInput = document.getElementById('notesInput').value;
      logEntry({ time: new Date().toLocaleTimeString(), event: eventType, notes: notesInput });
      updateStats();
      if (eventType === 'Team Scored') {
        teamScore++;
      } else if (eventType === 'Opponent Scored') {
        opponentScore++;
      }
      updateScores();
    }

    function logEntry(entryData) {
      const row = logTable.insertRow();
      const timeCell = row.insertCell(0);
      const eventCell = row.insertCell(1);
      const goalieCell = row.insertCell(2);
      const savesCell = row.insertCell(3);
      const goalsAgainstCell = row.insertCell(4);
      const cleanSheetsCell = row.insertCell(5);
      const goalieKickCell = row.insertCell(6);
      const qualifierCell = row.insertCell(7);
      const notesCell = row.insertCell(8);
      timeCell.textContent = entryData.time;
      eventCell.textContent = entryData.event || '';
      goalieCell.textContent = entryData.goalie || '';
      savesCell.textContent = entryData.saves || ''; // Display blank for NaN
      goalsAgainstCell.textContent = entryData.goalsAgainst || ''; // Display blank for NaN
      cleanSheetsCell.textContent = entryData.cleanSheets || ''; // Display blank for NaN
      goalieKickCell.textContent = entryData.goalieKick || '';
      qualifierCell.textContent = entryData.qualifier || '';
      notesCell.textContent = entryData.notes || '';
    }

    function updateStats() {
      statsTable.innerHTML = `
        <tr>
          <td>Saves:</td>
          <td>${saves}</td>
        </tr>
        <tr>
          <td>Goals Against:</td>
          <td>${goalsAgainst}</td>
        </tr>
        <tr>
          <td>Clean Sheets:</td>
          <td>${cleanSheets}</td>
        </tr>
        <tr>
          <td>Team Score:</td>
          <td>${teamScore}</td>
        </tr>
        <tr>
          <td>Opponent Score:</td>
          <td>${opponentScore}</td>
        </tr>
      `;
    }


    function updateScores() {
      teamScoreDisplay.textContent = teamScore;
      opponentScoreDisplay.textContent = opponentScore;
    }

    function exportJSON() {
      const logEntries = [];
      const rows = logTable.querySelectorAll('tr');
      rows.forEach((row, index) => {
        if (index !== 0) {
          const cells = row.querySelectorAll('td');
          const entry = {
            time: cells[0].textContent,
            event: cells[1].textContent,
            goalie: cells[2].textContent,
            saves: cells[3].textContent ? parseInt(cells[3].textContent) : '', // Display blank for NaN
            goalsAgainst: cells[4].textContent ? parseInt(cells[4].textContent) : '', // Display blank for NaN
            cleanSheets: cells[5].textContent ? parseInt(cells[5].textContent) : '', // Display blank for NaN
            goalieKick: cells[6].textContent,
            qualifier: cells[7].textContent,
            notes: cells[8].textContent,
          };
          logEntries.push(entry);
        }
      });
      const jsonBlob = new Blob([JSON.stringify(logEntries)], { type: 'application/json' });
      const url = URL.createObjectURL(jsonBlob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'goalie_log.json';
      a.click();
      URL.revokeObjectURL(url);
    }

    function importJSON() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = '.json';
      input.addEventListener('change', (e) => {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = function (event) {
          const importedData = JSON.parse(event.target.result);
          importedData.forEach((entry) => {
            logEntry(entry);
          });
          updateStats();
        };
        reader.readAsText(file);
      });
      input.click();
    }

    function clearLog() {
      logTable.innerHTML = '';
      saves = 0;
      goalsAgainst = 0;
      cleanSheets = 0;
      updateStats();
      teamScore = 0;
      opponentScore = 0;
      updateScores();
    }

  </script>

</body>
</html>
